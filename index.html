<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Password Validation Check in Javascript</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="./style.css">
</head>
<body>

<div class="validate">
    <h1 class="tit">Password Validation</h1>
    <div class="pass">
        <input type="password" class="pwds" placeholder="PASSWORD">
        <button type="button" class="btog">비밀번호표시</button>
    </div>
    <ul class="msgs">
        <li class="lowr">한 개 이상의 영문 소문자가 있어야 합니다.</li>
        <li class="uper">한 개 이상의 영문 대문자가 있어야 합니다.</li>
        <li class="numb">한 개 이상의 숫자가 있어야 합니다.</li>
        <li class="spcl">한 개 이상의 특수문자가 있어야 합니다.</li>
        <li class="leng">8글자 이상 이어야합니다.</li>
    </ul>
</div>

<script>
const validate = {
    init: function(){
        this.evt();
    },
    pwds: document.querySelector("input.pwds"),
    btog: document.querySelector("button.btog"),
    evt: function(){
      this.btog.addEventListener("click", e => this.togs() );
      this.pwds.addEventListener("keyup", e => this.check(e.target.value) );
    },
    check: function(txt){
        console.log(txt);
        const _lowr = new RegExp('(?=.*[a-z])'); /* 소문자포함 */
        const _uper = new RegExp('(?=.*[A-Z])'); /* 대문자포함 */
        const _numb = new RegExp('[0-9]'); /* 숫자포함 */
        const _spcl = new RegExp('(?=.*[~!@#\$%\^&\*])'); /* 특수문자포함 */
        const _leng = new RegExp('(?=.{8,})');   /* 8자이상 */

        const lowr = document.querySelector("li.lowr");
        const uper = document.querySelector("li.uper");
        const numb = document.querySelector("li.numb");
        const spcl = document.querySelector("li.spcl");
        const leng = document.querySelector("li.leng");

        const show = el => el.classList.remove("check");
        const hide = el => el.classList.add("check");
        
        _lowr.test(txt) ? hide(lowr) : show(lowr);
        _uper.test(txt) ? hide(uper) : show(uper);
        _numb.test(txt) ? hide(numb) : show(numb);
        _spcl.test(txt) ? hide(spcl) : show(spcl);
        _leng.test(txt) ? hide(leng) : show(leng);
    },
    togs: function(){
        if( this.pwds.type == "password" ){
            this.pwds.setAttribute("type","text");
            this.btog.classList.add("view");
        }else{
            this.pwds.setAttribute("type","password");
            this.btog.classList.remove("view");
        }
    }
};

document.addEventListener('DOMContentLoaded', e => validate.init() );
</script>

</body>
</html>